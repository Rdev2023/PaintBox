<!doctype html>
<html>
    <head>
        <title>
            Drag and Drop
        </title>
        <meta charset="utf-8"/>
        <link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="style.css" type="text/css"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/ui-lightness/jquery-ui.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
        <script>
            $(function(){
                $('#musicField img').draggable({
                    containment:'#musicBox',
                    cursor:'move',
                    revert:'invalid'
                });


                $('#trash').droppable({

                    hoverClass:'highlight',
                    drop: function(event, ui){
                        animate($(ui.draggable));
                    }
                });
            });

            function animate(which) {
                which.css('visibility','hidden');
                $('#trash img:first-child').css('visibility','hidden');
                debugger;
                $("#trash img:nth-child(2)").css("visibility","visible");
                var delta=$("#trash img:nth-child(2)").height();
                var count=5;
                delta = delta/count;
                $("#trash").data("count",count);
                $("#trash").data("delta",delta);
                animateCloud();


            };
            function animateCloud(){
                var count=$("#trash").data("count");
                var delta=$("#trash").data("delta");


                if (count) {
                    $("#trash img:nth-child(2)").css("top",-5.05*delta+(count*delta));
                    count=count-1;
                    $("#trash").data("count",count);
                    setTimeout(animateCloud,150);

                }
                else {
                    $("#trash img:nth-child(2)").css("visibility","hidden");
                    $('#trash img:first-child').css('visibility','visible');

                }
            }


        </script>
    </head>
    <body>
        <div id='wraper'>
            <div id='musicBox'>
                    <div id='trash'>
                        <img src="images/trash.png" alt="Trash picture"/>
                        <img src="images/epuff.png"alt="puff-f-f!!!">
                    </div>
                    <div id='musicField'>
                        <img src="images/blue.png" alt="blue brush"/>
                        <img src="images/red.png" alt="red brush"/>
                        <img src="images/green.png" alt="green brush"/>
                        <img src="images/black.png" alt="black brush"/>
                    </div>
            </div>

        </div>
    </body>
</html>
